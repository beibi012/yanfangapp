(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/air_detection/survey"],{"19b2":function(e,o,t){"use strict";(function(e,t){var i;Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n={onLoad:function(){i=this,i.time=new Date,i.year=i.time.getFullYear(),i.month=i.time.getMonth()+1,i.day=i.time.getDate(),i.date=i.year+"-"+i.month+"-"+i.day,i.dateA=i.year+"-"+i.month+"-"+i.day,i.samplingdate=i.year+"-"+i.month+"-"+i.day,i.pic[i.pic_index]=[],i.index_array[i.pic_index]=0;for(var o=0;o<25;o++){var n=o.toString()+":00";i.hours.push(n)}console.log(e(i.date," at pages/air_detection/survey.vue:302")),t.getStorage({key:"cookies",success:function(o){i.cookies=o.data,console.log(e("监测获取到cookies值为:"+i.cookies," at pages/air_detection/survey.vue:307"))}}),t.getStorage({key:"option1",success:function(o){console.log(e(o.data," at pages/air_detection/survey.vue:313")),i.option1=o.data,i.index=i.option1.roleId,i.dateA=i.option1.analyzeTime,i.upordown_Aindex=i.option1.analyzeTime_ud,i.lock2=!0}}),t.getStorage({key:"option2",success:function(o){console.log(e(o.data," at pages/air_detection/survey.vue:324")),i.option2=o.data,i.itemArray=i.option2.itemArray,i.lock3=!0}})},data:function(){return{IN:[],option1:{},option2:[],option3:{},fileid:[],filepath:[],filenumber:[],nowFileId:"",index_array:[],pic_index:0,pic:[],preview:[],vde_index:0,vde:[],id:[],vdecss:"position: fixed; top: 0; left: 0; width: 750upx; height: 750upx; z-index: 100; margin:0;",big:-1,vdebutton:" position: fixed; bottom: -250upx;width: 100%;",show:1,previewvde:-1,del:[],wh:"",takenotes:[1],note:1,date:"",time:"",governtime:"9",hours:[],upordown:["上午","下午"],upordown_index:0,dateA:"",upordown_A:["上午","下午"],upordown_Aindex:0,samplingdate:"",samplingTime:["上午","下午"],samptime_index:0,user:["个人","开发商","工装"],index:0,show1:!0,show2:!1,show3:!1,lock2:!1,lock3:!1,itemNumber:0,itemArray:[0],instNumber:0,instArray:[0],smapNumber:0,smapArray:[0],refresh:!0}},methods:{submitOption1:function(o){console.log(e("获取option1"," at pages/air_detection/survey.vue:389")),i.option1=o.detail.value,console.log(e(i.option1," at pages/air_detection/survey.vue:391")),t.setStorage({key:"option1",data:i.option1,success:function(){console.log(e("success op1"," at pages/air_detection/survey.vue:396"))}})},submitOption2:function(o){console.log(e("获取option2"," at pages/air_detection/survey.vue:402")),console.log(e(o.detail.value," at pages/air_detection/survey.vue:403"));var n=getApp();console.log(e(n.globalData.ctx," at pages/air_detection/survey.vue:417")),console.log(e(i.pic," at pages/air_detection/survey.vue:418"));for(var a=function(a){for(var r in i.option2[a]={},o.detail.value)-1!==r.search(a)&&(-1!==r.search("Name")&&(i.option2[a].monitoringItem=o.detail.value[r]),-1!==r.search("Method")&&(i.option2[a].analyzeCondition=o.detail.value[r]),-1!==r.search("remark")&&(i.option2[a].remark=o.detail.value[r]));i.fileid[a]="",i.filepath[a]="",i.filenumber[a]=0;for(var s=0;s<i.pic[a].length;s++)t.uploadFile({url:n.globalData.ctx+"/common/uploadFileUnify",fileType:"image",header:{"Content-type":"application/x-www-form-urlencoded",Cookie:i.cookies},name:"files",filePath:i.pic[a][s],success:function(o){t.showToast({title:"上传成功"}),console.log(e(o.data," at pages/air_detection/survey.vue:451"));var n=JSON.parse(o.data).fileIds;console.log(e("获取到fileid为:"+n," at pages/air_detection/survey.vue:454")),i.fileid[a]=i.fileid[a]+n,console.log(e("获取到nowFileId为:"+i.fileid[a]," at pages/air_detection/survey.vue:456"));var r=JSON.parse(o.data).urls;console.log(e("获取到imgPath为:"+r," at pages/air_detection/survey.vue:459")),i.filepath[a]=i.filepath[a]+r,console.log(e("获取到filepath为:"+i.filepath[a]," at pages/air_detection/survey.vue:461")),i.filenumber[a]++},fail:function(){t.showToast({title:"上传失败"})},complete:function(){i.filenumber[a]==i.pic[a].length&&(i.fileid[a]=i.fileid[a].substring(0,i.fileid[a].length-1),i.filepath[a]=i.filepath[a].substring(0,i.filepath[a].length-1),i.option2[a].nowFileId=i.fileid[a],i.option2[a].nowFilePath=i.filepath[a],i.option2[a].itemSerialNumber=a+1,console.log(e(i.option2," at pages/air_detection/survey.vue:477")),console.log(e(JSON.stringify(i.option2)," at pages/air_detection/survey.vue:478")),t.setStorage({key:"option2",data:i.option2,success:function(){console.log(e("success op2"," at pages/air_detection/survey.vue:483"))}}))}})},r=0;r<i.itemArray.length;r++)a(r)},submitOption3:function(o){console.log(e("获取option3"," at pages/air_detection/survey.vue:498")),console.log(e(o.detail.value," at pages/air_detection/survey.vue:499")),i.option3.homeEquipments=[];for(var n=0;n<i.instArray.length;n++){for(var a in i.option3.homeEquipments[n]={},o.detail.value)-1!==a.search("Inst"+n)&&(-1!==a.search("name")&&(i.option3.homeEquipments[n].name=o.detail.value[a]),-1!==a.search("model")&&(i.option3.homeEquipments[n].type=o.detail.value[a]),-1!==a.search("number")&&(i.option3.homeEquipments[n].factoryCode=o.detail.value[a]),-1!==a.search("factor")&&(i.option3.homeEquipments[n].itemId=o.detail.value[a]));i.option3.homeEquipments[n].equSerialNumber=n+1,console.log(e("====="," at pages/air_detection/survey.vue:526"))}i.option3.homeMonitoringContents=[];for(var r=0;r<i.smapArray.length;r++){for(var s in i.option3.homeMonitoringContents[r]={},o.detail.value)-1!==s.search("Sample"+r)&&(-1!==s.search("item")&&(i.option3.homeMonitoringContents[r].monitoringItem=o.detail.value[s]),-1!==s.search("name")&&(i.option3.homeMonitoringContents[r].sampleName=o.detail.value[s]),-1!==s.search("description")&&(i.option3.homeMonitoringContents[r].sampleDescription=o.detail.value[s]));i.option3.homeMonitoringContents[r].contentSerialNumber=r+1,console.log(e("====="," at pages/air_detection/survey.vue:548"))}i.option3.monitoringResult=o.detail.value.monitoringResult,i.option3.airProblem=o.detail.value.airProblem,i.option3.monGovernTime=o.detail.value.governDate+","+o.detail.value.governTime+":00",console.log(e(JSON.stringify(i.option3)," at pages/air_detection/survey.vue:553")),t.removeStorage({key:"option1",success:function(o){console.log(e("success1"," at pages/air_detection/survey.vue:558"))}}),t.removeStorage({key:"option2",success:function(o){console.log(e("success2"," at pages/air_detection/survey.vue:564"))}}),console.log(e("======================="," at pages/air_detection/survey.vue:626"));var c=getApp();console.log(e(c.globalData.ctx," at pages/air_detection/survey.vue:631")),t.request({url:c.globalData.ctx+"/home/homeAirMonitoring/add",header:{"Content-type":"application/json",Cookie:i.cookies},method:"post",data:{roleId:i.option1.roleId,projectName:i.option1.projectName,homeCustomers:[{address:i.option1.clientAddress,contactName:i.option1.clientContacts,customerType:"1",name:i.option1.clientName,phone:i.option1.clientNumber,userType:i.option1.roleId,remark:i.option1.area},{address:i.option1.ownerAddress,contactName:i.option1.ownerContacts,customerType:"2",name:i.option1.ownerName,phone:i.option1.ownerNumber,userType:i.option1.roleId}],temperature:i.option1.temperature,humidity:i.option1.humidity,monitoringSource:i.option1.surveySource,homeMonitoringItems:i.option2,homeEquipments:i.option3.homeEquipments,homeMonitoringContents:i.option3.homeMonitoringContents,monitoringResult:i.option3.monitoringResult,airProblem:i.option3.airProblem,monGovernTime:i.option3.monGovernTime},success:function(o){console.log(e(o," at pages/air_detection/survey.vue:678")),t.navigateBack({delta:1})},fail:function(){console.log(e("数据请求错误"," at pages/air_detection/survey.vue:684")),t.showToast({title:"数据请求错误",icon:"none"}),setTimeout(function(){t.hideToast()},1e3)},complete:function(){}})},addItem:function(){i.itemNumber++,i.itemArray.push(i.itemNumber),i.pic_index++,i.pic[i.pic_index]=[],i.index_array[i.pic_index]=0,console.log(e(i.pic," at pages/air_detection/survey.vue:703"))},addPic:function(o){console.log(e(o," at pages/air_detection/survey.vue:706")),t.chooseImage({count:5,sizeType:["original","compressed"],success:function(n){n.tempFilePaths.forEach(function(e){if(i.index_array[o]>4)return t.showToast({title:"最多选五张",icon:"none"}),!1;i.pic[o][i.index_array[o]]=e,i.index_array[o]++}),console.log(e(i.index_array[o]," at pages/air_detection/survey.vue:724")),console.log(e(i.pic[o]," at pages/air_detection/survey.vue:725")),i.pic.push([]),console.log(e(i.pic," at pages/air_detection/survey.vue:727")),i.pic.pop(),console.log(e(i.pic," at pages/air_detection/survey.vue:729"))}})},delPic:function(o,t){var n=i.index_array[o]-t;console.log(e(n," at pages/air_detection/survey.vue:780")),console.log(e(i.pic[o]," at pages/air_detection/survey.vue:781"));for(var a=0;a<n;a++)i.pic[o][t+a]=i.pic[o][t+a+1],i.pic[o].splice(t+a+1,0);i.pic[o].pop(),i.index_array[o]--,i.pic.push([]),i.pic.pop()},previewPic:function(e,o){i.preview=i.pic[e],t.previewImage({current:o,urls:i.preview})},toBig:function(e){i.big=e},playVideo:function(e){i.big=e,i.previewvde=e,i.vdebutton=" position: fixed; bottom: 0;width: 100%;transition-duration: 0.2s;"},pauseVideo:function(){i.vdebutton=" position: fixed; bottom: 0;width: 100%; z-index: 20;transition-duration: 0.2s; "},stopVideo:function(){i.big=-1,i.previewvde=-1,i.show=0,setTimeout(function(){i.show=1},1)},delVideo:function(e){i.big=-1,i.previewvde=-1;for(var o=i.vde_index-e,t=0;t<o;t++)i.vde[e+t]=i.vde[e+t+1],i.vde.splice(e+t+1,0);i.vde.pop(),i.vde_index--,i.show=0,setTimeout(function(){i.show=1},1)},takenotes_submit:function(o){console.log(e(o," at pages/air_detection/survey.vue:835"))},addnotes:function(){i.note++,i.takenotes.push(i.note),console.log(e(i.takenotes," at pages/air_detection/survey.vue:840"))},pickDate:function(e){i.date=e.detail.value},pickGovernTime:function(e){i.governtime=e.detail.value},pickTime:function(e){i.upordown_index=e.detail.value},pickDateA:function(e){i.dateA=e.detail.value},pickTimeA:function(e){i.upordown_Aindex=e.detail.value},pickSamplingDate:function(e){i.samplingdate=e.detail.value},pickSamplingTime:function(e){i.samptime_index=e.detail.value},changeUser:function(e){i.index=e.detail.value},nextModel1:function(){i.show1=!1,i.show2=!0,i.lock2=!0,t.pageScrollTo({scrollTop:0,duration:300})},nextModel2:function(){i.show2=!1,i.show3=!0,i.lock3=!0,t.pageScrollTo({scrollTop:0,duration:300})},showOption1:function(){i.show1=!0,i.show2=!1,i.show3=!1,i.lock2=!1,i.lock3=!1,t.pageScrollTo({scrollTop:0,duration:300})},showOption2:function(){i.lock2?(i.show1=!1,i.show2=!0,i.show3=!1,i.lock3=!1,t.pageScrollTo({scrollTop:0,duration:300})):(t.showToast({title:"请点击下一步",icon:"none"}),setTimeout(function(){t.hideToast()},2e3),t.pageScrollTo({scrollTop:5e3,duration:300}))},showOption3:function(){i.lock3?(i.show1=!1,i.show2=!1,i.show3=!0,t.pageScrollTo({scrollTop:0,duration:300})):(t.showToast({title:"请点击下一步",icon:"none"}),setTimeout(function(){t.hideToast()},2e3),t.pageScrollTo({scrollTop:5e3,duration:300}))},moveHandle:function(){},addInst:function(){i.instNumber++,i.instArray.push(i.instNumber)},addSmap:function(){i.smapNumber++,i.smapArray.push(i.smapNumber)}}};o.default=n}).call(this,t("0de9")["default"],t("6e42")["default"])},"51ec":function(e,o,t){"use strict";(function(e){t("a24d"),t("921b");i(t("66fd"));var o=i(t("f78d"));function i(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,t("6e42")["createPage"])},"791c":function(e,o,t){"use strict";var i=t("d7f9"),n=t.n(i);n.a},"9e5f":function(e,o,t){"use strict";var i=function(){var e=this,o=e.$createElement;e._self._c},n=[];t.d(o,"a",function(){return i}),t.d(o,"b",function(){return n})},d7f9:function(e,o,t){},d84c:function(e,o,t){"use strict";t.r(o);var i=t("19b2"),n=t.n(i);for(var a in i)"default"!==a&&function(e){t.d(o,e,function(){return i[e]})}(a);o["default"]=n.a},f78d:function(e,o,t){"use strict";t.r(o);var i=t("9e5f"),n=t("d84c");for(var a in n)"default"!==a&&function(e){t.d(o,e,function(){return n[e]})}(a);t("791c");var r=t("2877"),s=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,null,null);o["default"]=s.exports}},[["51ec","common/runtime","common/vendor"]]]);