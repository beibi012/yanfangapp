(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/air_detection/govern"],{"093e":function(e,t,o){},3298:function(e,t,o){"use strict";(function(e){o("a24d"),o("921b");i(o("66fd"));var t=i(o("fa19"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},"32b3":function(e,t,o){"use strict";o.r(t);var i=o("60c4"),n=o.n(i);for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);t["default"]=n.a},"45c5":function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},n=[];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return n})},"60c4":function(e,t,o){"use strict";(function(e,o){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={onLoad:function(t){i=this,console.log(e(t.data," at pages/air_detection/govern.vue:93")),i.data=JSON.parse(t.data),console.log(e(i.data," at pages/air_detection/govern.vue:95")),console.log(e(i.data.id," at pages/air_detection/govern.vue:96")),o.getStorage({key:"cookies",success:function(t){i.cookies=t.data,console.log(e("治理获取到cookies值为:"+i.cookies," at pages/air_detection/govern.vue:102"))}})},onShow:function(){},onHide:function(){},data:function(){return{data:{},getData:{},remark:"",nowFileId:"",video:[],imgList:[],imgID:"",imgPath:"",obj:{},cookies:"",pic_index:0,pic:[],preview:[],picupload:"0",vde_index:0,vde:[],vdeupload:0,id:[],vdecss:"position: fixed; top: 0; left: 0; width: 750upx; height: 750upx; z-index: 100; margin:0;",big:-1,vdebutton:" position: fixed; bottom: -250upx;width: 100%;",show:1,previewvde:-1,del:[],wh:"",takenotes:[1],note:1,usertype:["个人","开发商","工装"],index:0,username:["请选择项目"],index_username:0,itemname:["甲醛检测","乙醛检测"],index_itemname:0}},methods:{submit:function(t){console.log(e(t," at pages/air_detection/govern.vue:181"));var n=t.detail.value;console.log(e(n," at pages/air_detection/govern.vue:183"));var a=getApp();if(console.log(e(a.globalData.ctx," at pages/air_detection/govern.vue:186")),console.log(e(i.pic," at pages/air_detection/govern.vue:187")),i.pic!==[])for(var s=function(t){o.uploadFile({url:a.globalData.ctx+"/common/uploadFileUnify",fileType:"image",header:{"Content-type":"application/x-www-form-urlencoded",Cookie:i.cookies},name:"files",filePath:i.pic[t],success:function(a){o.showToast({title:"图片上传成功"}),console.log(e(a.data," at pages/air_detection/govern.vue:213")),i.imgList[t]={};var s=JSON.parse(a.data).fileIds;i.imgID=i.imgID+s,console.log(e("获取到fileid为:"+s," at pages/air_detection/govern.vue:218")),s=s.substring(0,s.length-1),i.imgList[t].id=s;var c=JSON.parse(a.data).fileNames;console.log(e("获取到fileNames为:"+c," at pages/air_detection/govern.vue:223")),c=c.substring(0,c.length-1),i.imgList[t].name=c;var r=JSON.parse(a.data).sizes;console.log(e("获取到fileNames为:"+r," at pages/air_detection/govern.vue:228")),r=r.substring(0,r.length-1),i.imgList[t].size=r;var d=JSON.parse(a.data).urls;for(var l in i.imgPath=i.imgPath+d,console.log(e("获取到fileNames为:"+d," at pages/air_detection/govern.vue:234")),d=d.substring(0,d.length-1),i.imgList[t].filePath=d,i.imgList[t].appId="",i.imgList[t].createBy=t,i.imgList[t].attType="1",n)-1!==l.search("remarkP"+t)&&(i.imgList[t].remark=n[l]);i.picupload++},fail:function(){o.showToast({title:"上传失败"})},complete:function(){i.pic.length==i.picupload&&(console.log(e(JSON.stringify(i.imgList)," at pages/air_detection/govern.vue:255")),i.imgID=i.imgID.substring(0,i.imgID.length-1),i.imgPath=i.imgPath.substring(0,i.imgPath.length-1),console.log(e(i.imgID," at pages/air_detection/govern.vue:258")),console.log(e(i.imgPath," at pages/air_detection/govern.vue:259")),o.request({url:a.globalData.ctx+"/home/homeGovernMessage/add",header:{"Content-type":"application/json",Cookie:i.cookies},method:"post",data:{airId:i.data.id,homeAttachments:i.imgList,fileId:i.imgID,govFilePath:i.imgPath},success:function(t){console.log(e(t," at pages/air_detection/govern.vue:275")),o.showToast({title:"治理上传成功",icon:"none"}),o.navigateBack({delta:1})},fail:function(){o.showToast({title:"数据请求错误",icon:"none"}),setTimeout(function(){o.hideToast()},1e3)},complete:function(){}}))}})},c=0;c<i.pic.length;c++)s(c)},addPic:function(){o.showActionSheet({itemList:["图片","视频"],success:function(t){0==t.tapIndex&&o.chooseImage({count:5,sizeType:["original","compressed"],success:function(t){t.tempFilePaths.forEach(function(e){i.pic[i.pic_index]=e,i.pic_index++}),console.log(e(i.pic_index," at pages/air_detection/govern.vue:360")),console.log(e(i.pic," at pages/air_detection/govern.vue:361"))}}),1==t.tapIndex&&o.chooseVideo({success:function(t){var n=t.tempFilePath.substr(t.tempFilePath.length-3,3);console.log(e(n," at pages/air_detection/govern.vue:369")),"AVI"!==n&&"FLV"!==n?(i.vde[i.vde_index]=t.tempFilePath,i.id[i.vde_index]=i.vde_index,i.vde_index++,console.log(e(i.vde," at pages/air_detection/govern.vue:374")),console.log(e(i.id," at pages/air_detection/govern.vue:375"))):o.showToast({title:"不能使用AVI或FLV"})}})}})},delPic:function(e){for(var t=i.pic_index-e,o=0;o<t;o++)i.pic[e+o]=i.pic[e+o+1],i.pic.splice(e+o+1,0);i.pic.pop(),i.pic_index--},previewPic:function(e){i.preview=i.pic,o.previewImage({current:e,urls:i.preview})},toBig:function(e){i.big=e},playVideo:function(e){i.big=e,i.previewvde=e,i.vdebutton=" position: fixed; bottom: 0;width: 100%;transition-duration: 0.2s;z-index:10;"},pauseVideo:function(){i.vdebutton=" position: fixed; bottom: 0;width: 100%; z-index: 20;transition-duration: 0.2s; "},stopVideo:function(){i.big=-1,i.previewvde=-1,i.show=0,setTimeout(function(){i.show=1},1)},delVideo:function(e){i.big=-1,i.previewvde=-1;for(var t=i.vde_index-e,o=0;o<t;o++)i.vde[e+o]=i.vde[e+o+1],i.vde.splice(e+o+1,0);i.vde.pop(),i.vde_index--,i.show=0,setTimeout(function(){i.show=1},1)},takenotes_submit:function(t){console.log(e(t," at pages/air_detection/govern.vue:444"))},addnotes:function(){i.note++,i.takenotes.push(i.note),console.log(e(i.takenotes," at pages/air_detection/govern.vue:449"))},pickDate:function(e){i.date=e.detail.value},pickTime:function(e){i.upordown_index=e.detail.value},changeUsertype:function(e){i.index=e.detail.value},changeUsername:function(e){i.index_username=e.detail.value},changeItemname:function(t){i.index_itemname=t.detail.value,console.log(e(t.detail.value," at pages/air_detection/govern.vue:465")),console.log(e(i.getData.rows[t.detail.value-1]," at pages/air_detection/govern.vue:466")),console.log(e(i.getData.rows[t.detail.value-1].id," at pages/air_detection/govern.vue:467"));var n=getApp();console.log(e(n.globalData.ctx," at pages/air_detection/govern.vue:469")),o.request({url:n.globalData.ctx+"/home/homeAirMonitoring/selectAirById/"+i.getData.rows[t.detail.value-1].id,method:"get",header:{"Content-type":"application/json",Cookie:i.cookies},data:{},success:function(t){console.log(e(t.data.homeCustomers[0].name," at pages/air_detection/govern.vue:481")),i.username=[t.data.homeCustomers[0].name],console.log(e(t.data.homeCustomers[0].userType," at pages/air_detection/govern.vue:483"));var o=t.data.homeCustomers[0].userType;i.usertype="0"==o?["个人"]:"1"==o?["开发商"]:["工装"],console.log(e(t.data," at pages/air_detection/govern.vue:492")),i.imgList=t.data.homeAttachments,console.log(e(i.imgList," at pages/air_detection/govern.vue:494")),i.pic_index=i.imgList.length;for(var n=0;n<i.imgList.length;n++)console.log(e(i.imgList[n].filePath," at pages/air_detection/govern.vue:497")),i.pic.push(i.imgList[n].filePath)},fail:function(){},complete:function(){}})},moveHandle:function(){}}};t.default=n}).call(this,o("0de9")["default"],o("6e42")["default"])},e9b3:function(e,t,o){"use strict";var i=o("093e"),n=o.n(i);n.a},fa19:function(e,t,o){"use strict";o.r(t);var i=o("45c5"),n=o("32b3");for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);o("e9b3");var s=o("2877"),c=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);t["default"]=c.exports}},[["3298","common/runtime","common/vendor"]]]);