(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/newly/take_notes"],{"17b7":function(e,o,n){"use strict";var t=function(){var e=this,o=e.$createElement;e._self._c},i=[];n.d(o,"a",function(){return t}),n.d(o,"b",function(){return i})},"306f":function(e,o,n){},3831:function(e,o,n){"use strict";var t=n("306f"),i=n.n(t);i.a},7417:function(e,o,n){"use strict";n.r(o);var t=n("e323"),i=n.n(t);for(var a in t)"default"!==a&&function(e){n.d(o,e,function(){return t[e]})}(a);o["default"]=i.a},"8c4e":function(e,o,n){"use strict";n.r(o);var t=n("17b7"),i=n("7417");for(var a in i)"default"!==a&&function(e){n.d(o,e,function(){return i[e]})}(a);n("3831");var s=n("2877"),c=Object(s["a"])(i["default"],t["a"],t["b"],!1,null,null,null);o["default"]=c.exports},e323:function(e,o,n){"use strict";(function(e,n){var t;Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i={onLoad:function(o){for(var n in t=this,console.log(e(o," at pages/index/newly/take_notes.vue:203")),o)t.psId=o[n],console.log(e(t.psId," at pages/index/newly/take_notes.vue:206"))},onShow:function(){n.$on("company",function(o){console.log(e("company携带参数 msg 为："+o.msg," at pages/index/newly/take_notes.vue:217")),t.company=o.msg,console.log(e(t.company," at pages/index/newly/take_notes.vue:219"))}),n.$on("problem",function(o){console.log(e("problem 携带参数 msg 为："+o.msg," at pages/index/newly/take_notes.vue:222")),t.obj=o.msg,console.log(e(t.obj," at pages/index/newly/take_notes.vue:224")),t.pr=t.pr=t.obj.main+"-"+t.obj.item+"-"+t.obj.describe})},data:function(){return{psId:"",cookies:"",imgList:"",chioce:!0,array1:["客厅","房间","厨房","厕所"],array2:["墙纸","电器设施","墙面","石材、瓷砖","木地板","渗漏类","天花","窗"],array3:["不平整","长毛、发霉","涂料破损","开裂","空鼓","其他"],array4:[],index_p:0,main:"部位",item:"部品",describe:"问题",obj:{},pr:"选择部位部品描述",company:"选择责任单位",index1:0,index2:0,index3:0,pic_index:0,pic:[],preview:[],vde_index:0,vde:[],id:[],vdecss:"position: fixed; top: 0; left: 0; width: 750upx; height: 750upx; z-index: 100; margin:0;",big:-1,vdebutton:" position: fixed; bottom: -250upx;width: 100%;",show:1,previewvde:-1,del:[],takenotes:[],note:0,date:"",submitted:!1,problem:[],obj_array:[],newobj:{},moreinfo_value:"",toleft:"toleft",toright:"toright"}},methods:{changeMain1:function(e){t.index1=e.detail.value},changeMain2:function(e){t.index2=e.detail.value},changeMain3:function(e){t.index3=e.detail.value},addPic:function(){n.chooseImage({count:5,sizeType:["original","compressed"],success:function(o){o.tempFilePaths.forEach(function(e){if(t.pic_index+t.vde_index>4)return n.showToast({title:"最多选五张",icon:"none"}),!1;t.pic[t.pic_index]=e,t.pic_index++}),console.log(e(t.pic_index," at pages/index/newly/take_notes.vue:304")),console.log(e(t.pic," at pages/index/newly/take_notes.vue:305"))}})},delPic:function(e){for(var o=t.pic_index-e,n=0;n<o;n++)t.pic[e+n]=t.pic[e+n+1],t.pic.splice(e+n+1,0);t.pic.pop(),t.pic_index--},previewPic:function(e){t.preview=t.pic,n.previewImage({current:e,urls:t.preview})},previewImg:function(e,o){t.preview[0]=t.problem[o][0].pic_array[e],n.previewImage({urls:t.preview})},toBig:function(e){t.big=e},playVideo:function(e){t.big=e,t.previewvde=e,t.vdebutton=" position: fixed; bottom: 0;width: 100%;transition-duration: 0.2s;"},pauseVideo:function(){t.vdebutton=" position: fixed; bottom: 0;width: 100%; z-index: 20;transition-duration: 0.2s; "},stopVideo:function(){t.big=-1,t.previewvde=-1,t.show=0,setTimeout(function(){t.show=1},1)},delVideo:function(e){t.big=-1,t.previewvde=-1;for(var o=t.vde_index-e,n=0;n<o;n++)t.vde[e+n]=t.vde[e+n+1],t.vde.splice(e+n+1,0);t.vde.pop(),t.vde_index--,t.show=0,setTimeout(function(){t.show=1},1)},takenotes_submit:function(o){console.log(e(o.detail.value," at pages/index/newly/take_notes.vue:408")),n.getStorage({key:"cookies",success:function(o){t.cookies=o.data,console.log(e("监测获取到cookies值为:"+t.cookies," at pages/index/newly/take_notes.vue:413"))}});var i=getApp();if(console.log(e(i.globalData.ctx," at pages/index/newly/take_notes.vue:417")),void 0!==t.pic[0]){console.log(e("有图片"," at pages/index/newly/take_notes.vue:419"));for(var a=function(a){n.uploadFile({url:i.globalData.ctx+"/common/uploadFileUnify",fileType:"image",header:{"Content-type":"application/x-www-form-urlencoded",Cookie:t.cookies},name:"files",filePath:t.pic[a],success:function(o){n.showToast({title:"上传成功"}),console.log(e(o.data," at pages/index/newly/take_notes.vue:434"));var i=JSON.parse(o.data).fileIds;t.imgList=t.imgList+i,console.log(e(t.imgList," at pages/index/newly/take_notes.vue:437"))},fail:function(){n.showToast({title:"上传失败"})},complete:function(){a==t.pic.length-1&&(t.imgList=t.imgList.substring(0,t.imgList.length-1),console.log(e(t.imgList," at pages/index/newly/take_notes.vue:486")),n.request({url:i.globalData.ctx+"/home/problem/rs/addProblemdescribeSave",header:{"Content-type":"application/json",Cookie:t.cookies},method:"post",data:{pdLoca:t.array1[o.detail.value.takenotes_main],pdLocation:t.array2[o.detail.value.takenotes_checkitem],pdContent:t.array3[o.detail.value.takenotes_problem],pdAdded:o.detail.value.moreinfo,pdState:"1",psId:t.psId,pdPhotoa:t.imgList},success:function(o){console.log(e(o," at pages/index/newly/take_notes.vue:504")),n.showToast({title:"上传成功",icon:"none"}),n.showModal({title:"提示",content:"是否添加新问题",confirmText:"添加",cancelText:"不添加",cancelColor:"#f00",success:function(o){o.confirm?(console.log(e("用户点击确定"," at pages/index/newly/take_notes.vue:517")),t.moreinfo_value="",t.index1=0,t.index2=0,t.index3=0,t.pic=[],t.pic_index=0,t.imgList=[],n.pageScrollTo({scrollTop:0,duration:300})):o.cancel&&(console.log(e("用户点击取消"," at pages/index/newly/take_notes.vue:530")),n.navigateBack({delta:1}))}})},fail:function(){n.showToast({title:"数据请求错误",icon:"none"}),setTimeout(function(){n.hideToast()},1e3)},complete:function(){}}))}})},s=0;s<t.pic.length;s++)a(s)}else console.log(e("没有图片"," at pages/index/newly/take_notes.vue:556")),n.showModal({title:"提示",content:"是否确定不添加图片",success:function(a){a.confirm?n.request({url:i.globalData.ctx+"/home/problem/rs/addProblemdescribeSave",header:{"Content-type":"application/json",Cookie:t.cookies},method:"post",data:{pdLoca:t.array1[o.detail.value.takenotes_main],pdLocation:t.array2[o.detail.value.takenotes_checkitem],pdContent:t.array3[o.detail.value.takenotes_problem],pdAdded:o.detail.value.moreinfo,pdPhotobs:t.imgList},success:function(o){console.log(e(o," at pages/index/newly/take_notes.vue:577")),n.showToast({title:"上传成功",icon:"none"}),n.showModal({title:"提示",content:"是否添加新问题",confirmText:"添加",cancelText:"不添加",cancelColor:"#f00",success:function(o){o.confirm?(console.log(e("用户点击确定"," at pages/index/newly/take_notes.vue:590")),t.moreinfo_value="",t.index1=0,t.index2=0,t.index3=0,n.pageScrollTo({scrollTop:0,duration:300})):o.cancel&&(console.log(e("用户点击取消"," at pages/index/newly/take_notes.vue:600")),n.navigateBack({delta:1}))}})},fail:function(){n.showToast({title:"数据请求错误",icon:"none"}),setTimeout(function(){n.hideToast()},1e3)},complete:function(){}}):a.cancel&&console.log(e("用户点击取消"," at pages/index/newly/take_notes.vue:622"))}})},addnotes:function(o){n.showModal({title:"提示",content:"点击确定后问题不可更改,可添加新问题",success:function(n){n.confirm?(console.log(e(t.note," at pages/index/newly/take_notes.vue:635")),t.obj_array[t.note]=new Object,t.obj_array[t.note].takenotes_main=t.array1[o.detail.value.takenotes_main],t.obj_array[t.note].takenotes_checkitem=t.array2[o.detail.value.takenotes_checkitem],t.obj_array[t.note].takenotes_problem=t.array3[o.detail.value.takenotes_problem],t.obj_array[t.note].moreinfo=o.detail.value.moreinfo,t.obj_array[t.note].pic_array=t.pic.concat(),t.obj_array[t.note].vde_array=t.vde.concat(),t.obj=JSON.parse(JSON.stringify(t.obj_array[t.note])),t.problem[t.note]=new Array,t.problem[t.note].push(t.obj),console.log(e(t.problem," at pages/index/newly/take_notes.vue:646")),t.takenotes.push(t.note),t.note++,t.submitted=!0,t.pic.length=0,t.vde.length=0,t.pic_index=0,t.vde_index=0,t.moreinfo_value=""):n.cancel&&console.log(e("用户点击取消"," at pages/index/newly/take_notes.vue:656"))}})},pickDate:function(e){t.date=e.detail.value},choiceProblem:function(){t.toright="toleft",t.array4=t.array1,t.index_p=0},choiceMain:function(o){return console.log(e(o," at pages/index/newly/take_notes.vue:670")),0==t.index_p?(t.main=o,t.array4=t.array2,void t.index_p++):1==t.index_p?(t.item=o,t.array4=t.array3,void t.index_p++):void(2==t.index_p&&(t.describe=o,t.index_p++,t.pr=t.main+"-"+t.item+"-"+t.describe,t.toright="toright"))}}};o.default=i}).call(this,n("0de9")["default"],n("6e42")["default"])},ff16:function(e,o,n){"use strict";(function(e){n("a24d"),n("921b");t(n("66fd"));var o=t(n("8c4e"));function t(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,n("6e42")["createPage"])}},[["ff16","common/runtime","common/vendor"]]]);