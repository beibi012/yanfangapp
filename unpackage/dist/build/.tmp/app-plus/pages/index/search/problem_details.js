(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/search/problem_details"],{"17ab":function(e,t,o){"use strict";o.r(t);var i=o("fe30"),a=o.n(i);for(var n in i)"default"!==n&&function(e){o.d(t,e,function(){return i[e]})}(n);t["default"]=a.a},"1ddc":function(e,t,o){"use strict";o.r(t);var i=o("3ff6"),a=o("17ab");for(var n in a)"default"!==n&&function(e){o.d(t,e,function(){return a[e]})}(n);o("392b");var s=o("2877"),c=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,null,null);t["default"]=c.exports},"392b":function(e,t,o){"use strict";var i=o("d113"),a=o.n(i);a.a},"3ff6":function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},a=[];o.d(t,"a",function(){return i}),o.d(t,"b",function(){return a})},c8bb:function(e,t,o){"use strict";(function(e){o("a24d"),o("921b");i(o("66fd"));var t=i(o("1ddc"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},d113:function(e,t,o){},fe30:function(e,t,o){"use strict";(function(e,o){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={onLoad:function(t){i=this,console.log(e(t," at pages/index/search/problem_details.vue:126")),"1"!==t.state&&(i.changed=1),i.pdId=t.pdId,i.psId=t.psId,i.psName=t.psName,console.log(e("selfpdid:"+i.pdId," at pages/index/search/problem_details.vue:133")),console.log(e(i.changed," at pages/index/search/problem_details.vue:134")),o.getStorage({key:"cookies",success:function(t){i.cookies=t.data,console.log(e("监测获取到cookies值为:"+i.cookies," at pages/index/search/problem_details.vue:139"))}});var a=getApp();o.request({url:a.globalData.ctx+"/home/problem/rs/problemdescribeList?pdId="+i.pdId,method:"POST",header:{"Content-type":"application/json",Cookie:i.cookies},data:{},success:function(t){console.log(e(t," at pages/index/search/problem_details.vue:154")),i.getData=t.data.rows,"null"==i.getData.pdAdded&&(i.getData.pdAdded="无"),console.log(e(i.getData[0].pdPhotoa," at pages/index/search/problem_details.vue:159")),i.piclista=i.getData[0].pdPhotoa.split(","),console.log(e(JSON.stringify(i.piclista[0])," at pages/index/search/problem_details.vue:161")),console.log(e(JSON.stringify(i.piclista[1])," at pages/index/search/problem_details.vue:162")),null!==i.getData[0].pdPhotob&&(i.piclistb=i.getData[0].pdPhotob.split(","))},fail:function(){},complete:function(){for(var t=0;t<i.piclista.length;t++)o.request({url:a.globalData.ctx+"/home/problem/rs/getFile?id="+i.piclista[t],method:"GET",header:{"Content-type":"application/json",Cookie:i.cookies},data:{},success:function(t){i.showPhotoa.push(t.data.filePath),console.log(e(i.showPhotoa," at pages/index/search/problem_details.vue:183"))},fail:function(){},complete:function(){}});for(var n=0;n<i.piclistb.length;n++)o.request({url:a.globalData.ctx+"/home/problem/rs/getFile?id="+i.piclistb[n],method:"GET",header:{"Content-type":"application/json",Cookie:i.cookies},data:{},success:function(t){i.showPhotob.push(t.data.filePath),console.log(e(i.showPhotob," at pages/index/search/problem_details.vue:202"))},fail:function(){},complete:function(){}})}})},onShow:function(){},data:function(){return{imgList:"",pdId:"",psId:"",psName:"",getData:[],changed:0,pic_index:0,pic:[],preview:[],vde_index:0,vde:[],id:[],vdecss:"position: fixed; top: 0; left: 0; width: 750upx; height: 750upx; z-index: 100; margin:0;",big:-1,vdebutton:" position: fixed; bottom: -250upx;width: 100%;",show:1,previewvde:-1,del:[],wh:"",takenotes:[1],note:1,piclista:[],showPhotoa:[],piclistb:[],showPhotob:[],piclist:["/static/1.jpeg","/static/126.jpg","/static/131.jpg","/static/153.jpg","/static/166.jpg"]}},methods:{addPic:function(){o.showActionSheet({itemList:["图片","视频"],success:function(t){0==t.tapIndex&&o.chooseImage({count:5,sizeType:["original","compressed"],success:function(t){t.tempFilePaths.forEach(function(e){if(i.pic_index+i.vde_index>4)return o.showToast({title:"最多选五张",icon:"none"}),!1;i.pic[i.pic_index]=e,i.pic_index++}),console.log(e(i.pic_index," at pages/index/search/problem_details.vue:272")),console.log(e(i.pic," at pages/index/search/problem_details.vue:273"))}}),1==t.tapIndex&&o.chooseVideo({success:function(t){i.vde[i.vde_index]=t.tempFilePath,i.id[i.vde_index]=i.vde_index,i.vde_index++,console.log(e(i.vde," at pages/index/search/problem_details.vue:283")),console.log(e(i.id," at pages/index/search/problem_details.vue:284"))}})}})},delPic:function(e){for(var t=i.pic_index-e,o=0;o<t;o++)i.pic[e+o]=i.pic[e+o+1],i.pic.splice(e+o+1,0);i.pic.pop(),i.pic_index--},previewPic:function(e){i.preview=i.pic,o.previewImage({current:e,urls:i.preview})},previewImg:function(e){i.preview=i.showPhotoa,o.previewImage({current:e,urls:i.preview})},previewImg2:function(e){i.preview=i.showPhotob,o.previewImage({current:e,urls:i.preview})},toBig:function(e){i.big=e},playVideo:function(e){i.big=e,i.previewvde=e,i.vdebutton=" position: fixed; bottom: 0;width: 100%;transition-duration: 0.2s;"},pauseVideo:function(){i.vdebutton=" position: fixed; bottom: 0;width: 100%; z-index: 20;transition-duration: 0.2s; "},stopVideo:function(){i.big=-1,i.previewvde=-1,i.show=0,setTimeout(function(){i.show=1},1)},delVideo:function(e){i.big=-1,i.previewvde=-1;for(var t=i.vde_index-e,o=0;o<t;o++)i.vde[e+o]=i.vde[e+o+1],i.vde.splice(e+o+1,0);i.vde.pop(),i.vde_index--,i.show=0,setTimeout(function(){i.show=1},1)},changeState:function(){void 0==i.pic[0]?o.showToast({title:"未添加复检图片",icon:"none",duration:2e3}):function(){for(var t=getApp(),a=function(a){o.uploadFile({url:t.globalData.ctx+"/common/uploadFileUnify",fileType:"image",header:{"Content-type":"application/x-www-form-urlencoded",Cookie:i.cookies},name:"files",filePath:i.pic[a],success:function(t){o.showToast({title:"上传成功"}),console.log(e(t.data," at pages/index/search/problem_details.vue:384"));var a=JSON.parse(t.data).fileIds;i.imgList=i.imgList+a,console.log(e(i.imgList," at pages/index/search/problem_details.vue:387"))},fail:function(){o.showToast({title:"上传失败"})},complete:function(){a==i.pic.length-1&&(i.imgList=i.imgList.substring(0,i.imgList.length-1),console.log(e(i.imgList," at pages/index/search/problem_details.vue:398")),o.request({url:t.globalData.ctx+"/home/problem/rs/editProblemdescribeSave",header:{"Content-type":"application/json",Cookie:i.cookies},method:"post",data:{pdState:"2",pdId:i.pdId,pdPhotob:i.imgList,psId:i.psId},success:function(t){console.log(e(t," at pages/index/search/problem_details.vue:413")),o.showToast({title:"上传成功",icon:"none"})},fail:function(){o.showToast({title:"数据请求错误",icon:"none"}),setTimeout(function(){o.hideToast()},1e3)},complete:function(){o.navigateBack({delta:1})}}))}})},n=0;n<i.pic.length;n++)a(n)}()},noChangeState:function(){void 0==i.pic[0]&&o.showToast({title:"未添加复检图片",icon:"none",duration:2e3}),o.navigateBack({delta:1})},aaa:function(){console.log(e(i.changed," at pages/index/search/problem_details.vue:459"))}}};t.default=a}).call(this,o("0de9")["default"],o("6e42")["default"])}},[["c8bb","common/runtime","common/vendor"]]]);